<html><body bgcolor="#ffffff" text="#000000"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td>According to research conducted recently, listening to classical music increases one's mental abilities, while listening to metal decreases them.  Now, yet another experiment is being conducted to try to prove or disprove this statement.<br></br><br></br>

In this new experiment, a mouse is placed in a rectangular maze consisting of NxM squares.  Each square either contains a wall or is empty.  The maze is structured in such a way that for any two empty squares, there exists exactly one path between them.  A path is a sequence of pairwise distinct empty squares such that every two consecutive squares are neighboring.  Two squares are considered neighboring if they share a common edge.<br></br><br></br>

One of the empty squares in the maze contains a piece of cheese, and the mouse's goal is to reach that square.  The mouse can only move between neighboring empty squares.  The mouse has been listening to metal for a week, so his mental abilities have become absolutely dull.  Not only can he not smell the cheese, he can't even remember where he was heading a moment ago, so he is just wandering randomly.  More precisely, from each square, the mouse will randomly choose one of the neighboring empty squares and move there.  The probability of choosing each of the squares is equal.  Each move takes one second.<br></br><br></br>

You are given a vector &lt;string&gt; <b>maze</b> representing the maze.  It contains N elements, each containing M characters.  Empty squares are denoted by '.', walls are denoted by uppercase 'X', and the square containing the cheese is denoted by '*'.  For each empty square, calculate the expected time required for the mouse to reach the cheese starting from that square.  Return the arithmetical mean of all the expected times.</td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>MazeWandering</td></tr><tr><td>Method:</td><td>expectedTime</td></tr><tr><td>Parameters:</td><td>vector &lt;string&gt;</td></tr><tr><td>Returns:</td><td>double</td></tr><tr><td>Method signature:</td><td>double expectedTime(vector &lt;string&gt; maze)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>64</td></tr></table></td></tr><tr><td colspan="2"><h3>Notes</h3></td></tr><tr><td align="center" valign="top">-</td><td>The returned value must have an absolute or relative error less than 1e-9. </td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>maze</b> will contain between 1 and 50 elements, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>maze</b> will contain between 1 and 50 characters, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Elements of <b>maze</b> will be of the same length.</td></tr><tr><td align="center" valign="top">-</td><td><b>maze</b> will contain only '.', 'X', or '*' characters.</td></tr><tr><td align="center" valign="top">-</td><td>There will be exactly one '*' character in <b>maze</b>.</td></tr><tr><td align="center" valign="top">-</td><td>For every pair of empty squares in the maze, there will exist exactly one path between them.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;*&quot;,
 &quot;.&quot;}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.5</pre></td></tr><tr><td><table><tr><td colspan="2">The mouse will need 0 seconds to find the cheese if it is put in the cheese-square and 1 second otherwise.
</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;*..&quot;}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 2.3333333333333335</pre></td></tr><tr><td><table><tr><td colspan="2">The expectations for each square are 0.0, 3.0 and 4.0.
</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;...&quot;,
 &quot;X*X&quot;,
 &quot;...&quot;}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 4.857142857142857</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;.*.&quot;,
 &quot;.XX&quot;,
 &quot;...&quot;}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 13.714285714285714</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;*........&quot;,
 &quot;XXX.XXXX.&quot;,
 &quot;.XX.X....&quot;,
 &quot;.....XX.X&quot;}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 167.2608695652174</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
